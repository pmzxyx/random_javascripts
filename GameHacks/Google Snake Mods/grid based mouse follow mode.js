javascript:(async()=>{function t(t,e=window){for(let[n,r]of Object.entries(e))if(r)try{let o=t(r,n);if(o)return o}catch(i){}}let e=t(t=>t.prototype.render&&t.prototype.render.toString().includes("canvas.width")?t:void 0);if(!e)throw Error("Render prot not found, signature scan isnt working anymore");let[,n]=t(t=>t.prototype.render.toString().match(/this\.(\w+\.\w+)\.direction/))||[];if(!n)throw Error("Game instance var name not found, signature scan isnt working anymore");let[,r]=t(t=>t.prototype.reset.toString().match(/this\.(\w+)\.push\(new/))||[];if(!r)throw Error("Body var name not found, signature scan isnt working anymore");let[,o,i]=t(t=>t.prototype.reset.toString().match(/this.(\w+)\[0\]\.(\w+)\.x/))||[];if(!o||!i)throw Error("Fruit var names not found, signature scan isnt working anymore");let[,a]=t(t=>t.prototype.reset.toString().match(/this\.(\w+\.\w+)\.width%2/))||[];if(!a)throw Error("Map size var name not found, signature scan isnt working anymore");function s(){return console.log(e.prototype.render),new Promise(t=>{let r=e.prototype.render;e.prototype.render=function(...o){return console.log("Game Instance Hooked"),t(n.split(".").reduce((t,e)=>t[e],this)),e.prototype.render=r,r.call(this,...o)}})}function u(t,e){t.direction=e}function l(t){return t.direction}function c(t){return t[r]}function f(t){return{x:window.x||0,y:window.y||0}}function h(t){return a.split(".").reduce((t,e)=>t[e],t)}function p(t){let e=c(t),n=h(t),r=Array(n.width).fill().map(t=>Array(n.height).fill(0));return e.forEach(({x:t,y:e})=>r[t][e]=1),r}function $(t,e){let n=t.length,r=t[0].length,o=Array(n).fill().map(t=>Array(r).fill(0)),i=[{x:e.x,y:e.y,c:1}];for(;i.length>0;){let{x:a,y:s,c:u}=i.shift();(!(u>1)||!(t[a][s]>0))&&0==o[a][s]&&(o[a][s]=u,a>0&&i.push({c:u+1,x:a-1,y:s}),a<n-1&&i.push({c:u+1,x:a+1,y:s}),s>0&&i.push({c:u+1,x:a,y:s-1}),s<r-1&&i.push({c:u+1,x:a,y:s+1}))}return o}async function y(t){return new Promise(e=>setTimeout(e,t))}async function g(){let t=await s(),e=document.querySelector("canvas");e.addEventListener("mousemove",n=>{let{width:r,height:o}=h(t);window.x=Math.max(0,Math.min(r-1,Math.floor((n.offsetX-28)/(e.width-56)*r))),window.y=Math.max(0,Math.min(o-1,Math.floor((n.offsetY-28)/(e.height-56)*o)))});let n=0;for(Date.now();;){var r,o;let i=c(t),{x:a,y:l}=i[0],{x:g,y:m}=i[i.length-1],_=1e5*(r=a)+l;if(n!=_){n=_;let{x:d,y:w}=f(t),x=p(t),v=$(x,{x:g,y:m}),S=$(x,{x:d,y:w}),k=()=>{let t=[];v[a+1]?.[l]&&t.push(["RIGHT",S[a+1]?.[l]||1e3]),v[a-1]?.[l]&&t.push(["LEFT",S[a-1]?.[l]||1e3]),v[a]?.[l+1]&&t.push(["DOWN",S[a]?.[l+1]||1e3]),v[a]?.[l-1]&&t.push(["UP",S[a]?.[l-1]||1e3]);let e=t.sort((t,e)=>t[1]-e[1])[0][0];return console.log("actions",t,"->",e),e},N=k();console.log({headX:a,headY:l,tailX:g,tailY:m,fruitX:d,fruitY:w,newDir:N}),u(t,N)}await y(50)}}console.log("renderObj.name",e.name),console.log("gameInstanceVarName",n),console.log("bodyVarName",r),console.log("fruitVarName1",o),console.log("fruitVarName2",i),console.log("mapSizeVarName",a),g()})();
